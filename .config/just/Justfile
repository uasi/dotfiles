import? '_env.just'

# Rarely-used setup tasks.
mod setup

_default:
    @just --list

# Edit the global Justfile.
edit:
    @"$EDITOR" {{ quote(justfile()) }}

# Clear irrelevant Cargo artifacts in ~/repos.
[group('housekeeping')]
cargo-sweep-repos:
    cargo sweep -i -r ~/repos

# Run `git fetch` for each repo in ~/repos.
[group('housekeeping')]
git-fetch-repos:
    git for-each-my-repo git fetch --all --prune --tags

# Run `git gc` for each repo in ~/repos.
[group('housekeeping')]
git-gc-repos:
    git for-each-my-repo git gc

# Clear global package caches of package managers for the npm ecosystem.
[group('housekeeping')]
clear-js-caches:
    @# Disable for now as Bun requires package.json to run `bun pm cache rm`.
    @# exec? bun pm cache rm
    exec? pnpm store prune
    exec? yarn cache clean
